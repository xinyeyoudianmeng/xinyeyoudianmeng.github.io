<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>情绪管理能力测评</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome -->
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.8/dist/chart.umd.min.js"></script>
    <!-- Tailwind 配置 -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#4A90E2',
                        secondary: '#50E3C2',
                        accent: '#F5A623',
                        neutral: '#7F8C8D',
                        light: '#F8F9FA',
                        dark: '#2C3E50'
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.5s ease-in-out',
                        'slide-up': 'slideUp 0.5s ease-in-out',
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' },
                        },
                        slideUp: {
                            '0%': { transform: 'translateY(20px)', opacity: '0' },
                            '100%': { transform: 'translateY(0)', opacity: '1' },
                        },
                    },
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .text-shadow {
                text-shadow: 0 2px 4px rgba(0,0,0,0.1);
            }
            .card-shadow {
                box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1), 0 4px 6px -2px rgba(0,0,0,0.05);
            }
            .transition-all-300 {
                transition: all 300ms ease-in-out;
            }
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-green-50 min-h-screen">
    <div class="container mx-auto px-4 py-8 max-w-4xl">
        <!-- 头部信息 -->
        <header class="text-center mb-8 animate-fade-in">
            <h1 class="text-4xl font-bold text-dark mb-2 text-shadow">情绪管理能力测评</h1>
            <p class="text-neutral text-lg">了解自己的情绪管理水平，开启自我成长之旅</p>
        </header>

        <!-- 付费和免责声明 -->
        <div class="bg-white rounded-lg p-6 mb-8 card-shadow animate-fade-in" style="animation-delay: 0.2s;">
            <div class="flex items-start mb-4">
                <i class="fa fa-info-circle text-primary text-xl mt-1 mr-3"></i>
                <div>
                    <h3 class="text-lg font-semibold text-dark mb-1">付费测试声明</h3>
                    <p class="text-neutral">本测试为原创内容服务，非专业医疗/心理测评。测试结果仅供自我了解和个人成长参考，不构成任何形式的诊断或治疗建议。</p>
                </div>
            </div>
            <div class="flex items-start">
                <i class="fa fa-exclamation-triangle text-accent text-xl mt-1 mr-3"></i>
                <div>
                    <h3 class="text-lg font-semibold text-dark mb-1">免责说明</h3>
                    <p class="text-neutral">本测试结果不能替代专业心理咨询或治疗。如果您正经历严重的情绪困扰，建议寻求专业心理健康服务提供者的帮助。</p>
                </div>
            </div>
        </div>

        <!-- 测评开始按钮 -->
        <div class="text-center mb-8 animate-fade-in" style="animation-delay: 0.4s;">
            <button id="start-test-btn" class="bg-primary hover:bg-blue-600 text-white font-bold py-3 px-8 rounded-full transition-all-300 transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50">
                开始测评
            </button>
        </div>

        <!-- 测评进度条 -->
        <div id="progress-container" class="hidden mb-8 animate-fade-in">
            <div class="flex justify-between text-sm text-neutral mb-1">
                <span>进度</span>
                <span id="progress-text">0/25</span>
            </div>
            <div class="w-full bg-gray-200 rounded-full h-2.5">
                <div id="progress-bar" class="bg-primary h-2.5 rounded-full" style="width: 0%"></div>
            </div>
        </div>

        <!-- 测评问题区域 -->
        <div id="question-container" class="hidden bg-white rounded-lg p-6 mb-8 card-shadow animate-fade-in">
            <h2 id="question-number" class="text-xl font-semibold text-dark mb-4">问题 1/25</h2>
            <h3 id="question-text" class="text-lg text-dark mb-6">当我感到生气时，我能够意识到自己的情绪状态。</h3>
            
            <div id="options-container" class="space-y-4">
                <!-- 选项将通过JavaScript动态生成 -->
            </div>
        </div>

        <!-- 结果区域 -->
        <div id="result-container" class="hidden animate-fade-in">
            <!-- 总体评分 -->
            <div class="bg-white rounded-lg p-6 mb-8 card-shadow">
                <h2 class="text-2xl font-bold text-dark mb-4 text-center">测评结果</h2>
                <div class="flex justify-center mb-6">
                    <div class="relative w-48 h-48">
                        <svg class="w-full h-full" viewBox="0 0 100 100">
                            <circle cx="50" cy="50" r="45" fill="none" stroke="#e6e6e6" stroke-width="10" />
                            <circle id="score-circle" cx="50" cy="50" r="45" fill="none" stroke="#4A90E2" stroke-width="10" stroke-dasharray="283" stroke-dashoffset="283" transform="rotate(-90 50 50)" />
                        </svg>
                        <div class="absolute inset-0 flex flex-col items-center justify-center">
                            <span id="total-score" class="text-4xl font-bold text-dark">0</span>
                            <span id="score-level" class="text-lg text-neutral">待评估</span>
                        </div>
                    </div>
                </div>
                <p id="score-description" class="text-center text-neutral">您的情绪管理能力评估结果将显示在这里。</p>
            </div>

            <!-- 维度分析 -->
            <div class="bg-white rounded-lg p-6 mb-8 card-shadow">
                <h3 class="text-xl font-semibold text-dark mb-4">维度分析</h3>
                <div class="mb-6">
                    <canvas id="radar-chart" width="400" height="300"></canvas>
                </div>
                <div id="dimension-details" class="space-y-4">
                    <!-- 维度详情将通过JavaScript动态生成 -->
                </div>
            </div>

            <!-- 个性化建议 -->
            <div class="bg-white rounded-lg p-6 mb-8 card-shadow">
                <h3 class="text-xl font-semibold text-dark mb-4">个性化建议</h3>
                <div id="personalized-advice" class="space-y-4">
                    <!-- 个性化建议将通过JavaScript动态生成 -->
                </div>
            </div>

            <!-- 正向引导 -->
            <div class="bg-gradient-to-r from-blue-500 to-green-500 rounded-lg p-6 text-white">
                <h3 class="text-xl font-semibold mb-4">成长之旅</h3>
                <p class="mb-4">情绪管理是一项可以通过练习不断提升的能力。每一次对自己情绪的觉察和调整，都是成长的一步。</p>
                <p class="mb-4">如果您希望进一步提升情绪管理能力，可以考虑：</p>
                <ul class="list-disc pl-5 mb-4 space-y-2">
                    <li>阅读情绪管理相关书籍</li>
                    <li>参加情绪管理工作坊或课程</li>
                    <li>实践正念冥想或深呼吸练习</li>
                    <li>与亲友分享情绪体验</li>
                </ul>
                <p>记住，寻求帮助是勇敢的表现。如果您经常被强烈的情绪所困扰，建议寻求专业心理咨询师的支持。</p>
            </div>
        </div>

        <!-- 原创声明 -->
        <footer class="mt-12 text-center text-neutral text-sm">
            <p>© 2025 情绪管理能力测评 | 原创内容，未经授权禁止复制传播</p>
        </footer>
    </div>

    <script>
        // 测评题目数据
        const questions = [
            // 情绪觉察能力
            {
                id: 1,
                dimension: "情绪觉察能力",
                text: "当我感到生气时，我能够意识到自己的情绪状态。",
                options: [
                    { value: 1, text: "完全不符合" },
                    { value: 2, text: "不太符合" },
                    { value: 3, text: "一般" },
                    { value: 4, text: "比较符合" },
                    { value: 5, text: "完全符合" }
                ]
            },
            {
                id: 2,
                dimension: "情绪觉察能力",
                text: "我能够识别出自己在不同情境下的情绪变化。",
                options: [
                    { value: 1, text: "完全不符合" },
                    { value: 2, text: "不太符合" },
                    { value: 3, text: "一般" },
                    { value: 4, text: "比较符合" },
                    { value: 5, text: "完全符合" }
                ]
            },
            {
                id: 3,
                dimension: "情绪觉察能力",
                text: "我能够准确地用词语描述自己的感受。",
                options: [
                    { value: 1, text: "完全不符合" },
                    { value: 2, text: "不太符合" },
                    { value: 3, text: "一般" },
                    { value: 4, text: "比较符合" },
                    { value: 5, text: "完全符合" }
                ]
            },
            {
                id: 4,
                dimension: "情绪觉察能力",
                text: "我注意到自己的身体反应如何反映我的情绪状态。",
                options: [
                    { value: 1, text: "完全不符合" },
                    { value: 2, text: "不太符合" },
                    { value: 3, text: "一般" },
                    { value: 4, text: "比较符合" },
                    { value: 5, text: "完全符合" }
                ]
            },
            {
                id: 5,
                dimension: "情绪觉察能力",
                text: "我能够意识到情绪如何影响我的思维和行为。",
                options: [
                    { value: 1, text: "完全不符合" },
                    { value: 2, text: "不太符合" },
                    { value: 3, text: "一般" },
                    { value: 4, text: "比较符合" },
                    { value: 5, text: "完全符合" }
                ]
            },
            
            // 情绪表达能力
            {
                id: 6,
                dimension: "情绪表达能力",
                text: "我能够以适当的方式表达自己的情绪，而不伤害他人。",
                options: [
                    { value: 1, text: "完全不符合" },
                    { value: 2, text: "不太符合" },
                    { value: 3, text: "一般" },
                    { value: 4, text: "比较符合" },
                    { value: 5, text: "完全符合" }
                ]
            },
            {
                id: 7,
                dimension: "情绪表达能力",
                text: "在需要的时候，我能够向他人分享我的感受。",
                options: [
                    { value: 1, text: "完全不符合" },
                    { value: 2, text: "不太符合" },
                    { value: 3, text: "一般" },
                    { value: 4, text: "比较符合" },
                    { value: 5, text: "完全符合" }
                ]
            },
            {
                id: 8,
                dimension: "情绪表达能力",
                text: "我能够根据不同的场合调整情绪表达的方式。",
                options: [
                    { value: 1, text: "完全不符合" },
                    { value: 2, text: "不太符合" },
                    { value: 3, text: "一般" },
                    { value: 4, text: "比较符合" },
                    { value: 5, text: "完全符合" }
                ]
            },
            {
                id: 9,
                dimension: "情绪表达能力",
                text: "我能够用非言语方式（如面部表情、肢体语言）表达情绪。",
                options: [
                    { value: 1, text: "完全不符合" },
                    { value: 2, text: "不太符合" },
                    { value: 3, text: "一般" },
                    { value: 4, text: "比较符合" },
                    { value: 5, text: "完全符合" }
                ]
            },
            {
                id: 10,
                dimension: "情绪表达能力",
                text: "我能够表达负面情绪，而不会让情况变得更糟。",
                options: [
                    { value: 1, text: "完全不符合" },
                    { value: 2, text: "不太符合" },
                    { value: 3, text: "一般" },
                    { value: 4, text: "比较符合" },
                    { value: 5, text: "完全符合" }
                ]
            },
            
            // 情绪调节能力
            {
                id: 11,
                dimension: "情绪调节能力",
                text: "当我感到过度焦虑时，我能够让自己冷静下来。",
                options: [
                    { value: 1, text: "完全不符合" },
                    { value: 2, text: "不太符合" },
                    { value: 3, text: "一般" },
                    { value: 4, text: "比较符合" },
                    { value: 5, text: "完全符合" }
                ]
            },
            {
                id: 12,
                dimension: "情绪调节能力",
                text: "我能够控制自己的愤怒，避免冲动行为。",
                options: [
                    { value: 1, text: "完全不符合" },
                    { value: 2, text: "不太符合" },
                    { value: 3, text: "一般" },
                    { value: 4, text: "比较符合" },
                    { value: 5, text: "完全符合" }
                ]
            },
            {
                id: 13,
                dimension: "情绪调节能力",
                text: "当我感到沮丧时，我能够做一些事情来改善心情。",
                options: [
                    { value: 1, text: "完全不符合" },
                    { value: 2, text: "不太符合" },
                    { value: 3, text: "一般" },
                    { value: 4, text: "比较符合" },
                    { value: 5, text: "完全符合" }
                ]
            },
            {
                id: 14,
                dimension: "情绪调节能力",
                text: "我能够在压力下保持情绪稳定。",
                options: [
                    { value: 1, text: "完全不符合" },
                    { value: 2, text: "不太符合" },
                    { value: 3, text: "一般" },
                    { value: 4, text: "比较符合" },
                    { value: 5, text: "完全符合" }
                ]
            },
            {
                id: 15,
                dimension: "情绪调节能力",
                text: "我能够平衡积极和消极情绪，不让任何一种情绪过度主导。",
                options: [
                    { value: 1, text: "完全不符合" },
                    { value: 2, text: "不太符合" },
                    { value: 3, text: "一般" },
                    { value: 4, text: "比较符合" },
                    { value: 5, text: "完全符合" }
                ]
            },
            
            // 情绪应对能力
            {
                id: 16,
                dimension: "情绪应对能力",
                text: "当遇到困难时，我能够保持积极的态度。",
                options: [
                    { value: 1, text: "完全不符合" },
                    { value: 2, text: "不太符合" },
                    { value: 3, text: "一般" },
                    { value: 4, text: "比较符合" },
                    { value: 5, text: "完全符合" }
                ]
            },
            {
                id: 17,
                dimension: "情绪应对能力",
                text: "我能够从失败或挫折中恢复过来。",
                options: [
                    { value: 1, text: "完全不符合" },
                    { value: 2, text: "不太符合" },
                    { value: 3, text: "一般" },
                    { value: 4, text: "比较符合" },
                    { value: 5, text: "完全符合" }
                ]
            },
            {
                id: 18,
                dimension: "情绪应对能力",
                text: "当面对冲突时，我能够保持冷静并寻找解决方案。",
                options: [
                    { value: 1, text: "完全不符合" },
                    { value: 2, text: "不太符合" },
                    { value: 3, text: "一般" },
                    { value: 4, text: "比较符合" },
                    { value: 5, text: "完全符合" }
                ]
            },
            {
                id: 19,
                dimension: "情绪应对能力",
                text: "我能够接受无法改变的事情，并专注于可以控制的方面。",
                options: [
                    { value: 1, text: "完全不符合" },
                    { value: 2, text: "不太符合" },
                    { value: 3, text: "一般" },
                    { value: 4, text: "比较符合" },
                    { value: 5, text: "完全符合" }
                ]
            },
            {
                id: 20,
                dimension: "情绪应对能力",
                text: "当感到不知所措时，我能够分解问题并一步步解决。",
                options: [
                    { value: 1, text: "完全不符合" },
                    { value: 2, text: "不太符合" },
                    { value: 3, text: "一般" },
                    { value: 4, text: "比较符合" },
                    { value: 5, text: "完全符合" }
                ]
            },
            
            // 情绪转化能力
            {
                id: 21,
                dimension: "情绪转化能力",
                text: "我能够将压力转化为动力，推动自己前进。",
                options: [
                    { value: 1, text: "完全不符合" },
                    { value: 2, text: "不太符合" },
                    { value: 3, text: "一般" },
                    { value: 4, text: "比较符合" },
                    { value: 5, text: "完全符合" }
                ]
            },
            {
                id: 22,
                dimension: "情绪转化能力",
                text: "当感到失望时，我能够寻找积极的学习经验。",
                options: [
                    { value: 1, text: "完全不符合" },
                    { value: 2, text: "不太符合" },
                    { value: 3, text: "一般" },
                    { value: 4, text: "比较符合" },
                    { value: 5, text: "完全符合" }
                ]
            },
            {
                id: 23,
                dimension: "情绪转化能力",
                text: "我能够利用情绪能量来创造性地解决问题。",
                options: [
                    { value: 1, text: "完全不符合" },
                    { value: 2, text: "不太符合" },
                    { value: 3, text: "一般" },
                    { value: 4, text: "比较符合" },
                    { value: 5, text: "完全符合" }
                ]
            },
            {
                id: 24,
                dimension: "情绪转化能力",
                text: "当感到愤怒时，我能够将这种能量引导到有建设性的活动中。",
                options: [
                    { value: 1, text: "完全不符合" },
                    { value: 2, text: "不太符合" },
                    { value: 3, text: "一般" },
                    { value: 4, text: "比较符合" },
                    { value: 5, text: "完全符合" }
                ]
            },
            {
                id: 25,
                dimension: "情绪转化能力",
                text: "我能够从负面情绪中找到成长和改变的机会。",
                options: [
                    { value: 1, text: "完全不符合" },
                    { value: 2, text: "不太符合" },
                    { value: 3, text: "一般" },
                    { value: 4, text: "比较符合" },
                    { value: 5, text: "完全符合" }
                ]
            }
        ];

        // 维度解释和建议
        const dimensionInfo = {
            "情绪觉察能力": {
                description: "识别和理解自己情绪的能力",
                advice: {
                    low: "尝试每天花几分钟时间反思自己的情绪状态，记录情绪日记可能会有所帮助。",
                    medium: "继续练习识别情绪的细微变化，尝试使用更精确的情绪词汇来描述感受。",
                    high: "您已经具备很好的情绪觉察能力，可以尝试帮助他人提高情绪觉察。"
                }
            },
            "情绪表达能力": {
                description: "适当表达情绪的能力",
                advice: {
                    low: "练习在安全的环境中表达情绪，如与信任的朋友交流或通过写作表达。",
                    medium: "注意观察不同场合下的情绪表达方式，学习灵活调整表达策略。",
                    high: "您的情绪表达能力很好，可以帮助他人学习有效的情绪表达方法。"
                }
            },
            "情绪调节能力": {
                description: "调整和控制情绪强度的能力",
                advice: {
                    low: "学习简单的放松技巧，如深呼吸、渐进式肌肉放松等，帮助调节情绪。",
                    medium: "继续练习情绪调节技巧，注意识别情绪触发因素，提前做好准备。",
                    high: "您的情绪调节能力很强，可以分享经验帮助他人，同时注意不要过度压抑情绪。"
                }
            },
            "情绪应对能力": {
                description: "面对负面情绪时的应对策略",
                advice: {
                    low: "学习问题解决技巧，将大问题分解为小步骤，逐步应对。",
                    medium: "尝试多种应对策略，找出最适合自己的方法，建立个人的应对工具箱。",
                    high: "您的情绪应对能力很好，可以帮助他人学习有效的应对策略。"
                }
            },
            "情绪转化能力": {
                description: "将负面情绪转化为积极行动的能力",
                advice: {
                    low: "尝试将负面情绪与具体行动联系起来，如将愤怒转化为运动，将悲伤转化为创作。",
                    medium: "继续探索情绪与行动之间的联系，寻找更多将情绪能量转化为建设性行动的方法。",
                    high: "您已经能够很好地转化情绪能量，可以帮助他人学习这一宝贵技能。"
                }
            }
        };

        // 总体评分等级和描述
        const scoreLevels = [
            { min: 25, max: 39, level: "需关注", description: "您的情绪管理能力处于较低水平，可能经常被情绪所困扰。建议您关注自己的情绪状态，学习基本的情绪管理技巧，必要时寻求专业帮助。" },
            { min: 40, max: 54, level: "需提升", description: "您的情绪管理能力有一定基础，但仍有较大提升空间。建议您学习更多情绪管理策略，有意识地在日常生活中实践。" },
            { min: 55, max: 69, level: "一般", description: "您的情绪管理能力处于中等水平。在大多数情况下，您能够应对日常情绪挑战，但在压力较大时可能会遇到困难。" },
            { min: 70, max: 84, level: "良好", description: "您的情绪管理能力较好，能够有效地应对大多数情绪挑战。您已经掌握了一些情绪管理技巧，可以继续深化和完善。" },
            { min: 85, max: 125, level: "优秀", description: "您的情绪管理能力非常出色！您能够很好地觉察、表达、调节和转化情绪。您可以考虑帮助他人提升情绪管理能力，分享您的经验和技巧。" }
        ];

        // 应用状态
        let currentQuestionIndex = 0;
        const userResponses = [];
        let radarChart = null;

        // DOM 元素
        const startTestBtn = document.getElementById('start-test-btn');
        const progressContainer = document.getElementById('progress-container');
        const progressBar = document.getElementById('progress-bar');
        const progressText = document.getElementById('progress-text');
        const questionContainer = document.getElementById('question-container');
        const questionNumber = document.getElementById('question-number');
        const questionText = document.getElementById('question-text');
        const optionsContainer = document.getElementById('options-container');
        const resultContainer = document.getElementById('result-container');

        // 开始测评按钮点击事件
        startTestBtn.addEventListener('click', startTest);

        // 开始测评
        function startTest() {
            startTestBtn.classList.add('hidden');
            progressContainer.classList.remove('hidden');
            questionContainer.classList.remove('hidden');
            
            showQuestion(currentQuestionIndex);
        }

        // 显示问题
        function showQuestion(index) {
            const question = questions[index];
            questionNumber.textContent = `问题 ${index + 1}/${questions.length}`;
            questionText.textContent = question.text;
            
            // 清空选项容器
            optionsContainer.innerHTML = '';
            
            // 添加选项
            question.options.forEach(option => {
                const optionDiv = document.createElement('div');
                optionDiv.className = 'option flex items-center p-3 border rounded-lg cursor-pointer hover:bg-blue-50 transition-all-300';
                optionDiv.dataset.value = option.value;
                
                optionDiv.innerHTML = `
                    <div class="w-6 h-6 rounded-full border-2 border-primary flex items-center justify-center mr-3">
                        <div class="option-indicator w-3 h-3 rounded-full bg-primary hidden"></div>
                    </div>
                    <span>${option.text}</span>
                `;
                
                optionDiv.addEventListener('click', () => selectOption(option.value));
                optionsContainer.appendChild(optionDiv);
            });
            
            // 更新进度条
            updateProgress(index);
        }

        // 选择选项
        function selectOption(value) {
            // 保存用户回答
            userResponses.push({
                questionId: questions[currentQuestionIndex].id,
                dimension: questions[currentQuestionIndex].dimension,
                value: value
            });
            
            // 高亮选中的选项
            const options = optionsContainer.querySelectorAll('.option');
            options.forEach(option => {
                if (parseInt(option.dataset.value) === value) {
                    option.classList.add('bg-blue-50', 'border-primary');
                    option.querySelector('.option-indicator').classList.remove('hidden');
                } else {
                    option.classList.remove('bg-blue-50', 'border-primary');
                    option.querySelector('.option-indicator').classList.add('hidden');
                }
            });
            
            // 延迟后显示下一题
            setTimeout(() => {
                currentQuestionIndex++;
                if (currentQuestionIndex < questions.length) {
                    showQuestion(currentQuestionIndex);
                } else {
                    showResults();
                }
            }, 500);
        }

        // 更新进度条
        function updateProgress(index) {
            const progress = ((index + 1) / questions.length) * 100;
            progressBar.style.width = `${progress}%`;
            progressText.textContent = `${index + 1}/${questions.length}`;
        }

        // 显示结果
        function showResults() {
            // 隐藏问题容器
            questionContainer.classList.add('hidden');
            progressContainer.classList.add('hidden');
            
            // 计算得分
            const scores = calculateScores();
            
            // 显示结果
            displayResults(scores);
            
            // 显示结果容器
            resultContainer.classList.remove('hidden');
        }

        // 计算得分
        function calculateScores() {
            let totalScore = 0;
            const dimensionScores = {
                "情绪觉察能力": 0,
                "情绪表达能力": 0,
                "情绪调节能力": 0,
                "情绪应对能力": 0,
                "情绪转化能力": 0
            };
            
            // 计算总分和各维度得分
            userResponses.forEach(response => {
                totalScore += response.value;
                dimensionScores[response.dimension] += response.value;
            });
            
            // 计算各维度平均分
            const dimensionCounts = {
                "情绪觉察能力": 5,
                "情绪表达能力": 5,
                "情绪调节能力": 5,
                "情绪应对能力": 5,
                "情绪转化能力": 5
            };
            
            const dimensionAverages = {};
            for (const dimension in dimensionScores) {
                dimensionAverages[dimension] = dimensionScores[dimension] / dimensionCounts[dimension];
            }
            
            return {
                totalScore,
                dimensionScores,
                dimensionAverages
            };
        }

        // 显示结果
        function displayResults(scores) {
            // 显示总体评分
            const totalScoreElement = document.getElementById('total-score');
            const scoreLevelElement = document.getElementById('score-level');
            const scoreDescriptionElement = document.getElementById('score-description');
            
            totalScoreElement.textContent = scores.totalScore;
            
            // 找到对应的评分等级
            const scoreLevel = scoreLevels.find(level => 
                scores.totalScore >= level.min && scores.totalScore <= level.max
            );
            
            scoreLevelElement.textContent = scoreLevel.level;
            scoreDescriptionElement.textContent = scoreLevel.description;
            
            // 动画显示评分圆环
            animateScoreCircle(scores.totalScore);
            
            // 显示维度分析
            displayDimensionAnalysis(scores.dimensionAverages);
            
            // 显示个性化建议
            displayPersonalizedAdvice(scores.dimensionAverages);
        }

        // 动画显示评分圆环
        function animateScoreCircle(score) {
            const scoreCircle = document.getElementById('score-circle');
            const maxScore = 125;
            const circumference = 2 * Math.PI * 45;
            const offset = circumference - (score / maxScore) * circumference;
            
            scoreCircle.style.strokeDasharray = circumference;
            scoreCircle.style.strokeDashoffset = circumference;
            
            setTimeout(() => {
                scoreCircle.style.transition = 'stroke-dashoffset 1s ease-in-out';
                scoreCircle.style.strokeDashoffset = offset;
            }, 100);
        }

        // 显示维度分析
        function displayDimensionAnalysis(dimensionAverages) {
            // 准备雷达图数据
            const labels = Object.keys(dimensionAverages);
            const data = Object.values(dimensionAverages);
            
            // 创建雷达图
            const ctx = document.getElementById('radar-chart').getContext('2d');
            
            if (radarChart) {
                radarChart.destroy();
            }
            
            radarChart = new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: labels,
                    datasets: [{
                        label: '得分',
                        data: data,
                        backgroundColor: 'rgba(74, 144, 226, 0.2)',
                        borderColor: 'rgba(74, 144, 226, 1)',
                        borderWidth: 2,
                        pointBackgroundColor: 'rgba(74, 144, 226, 1)',
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: 'rgba(74, 144, 226, 1)'
                    }]
                },
                options: {
                    scales: {
                        r: {
                            beginAtZero: true,
                            max: 5,
                            ticks: {
                                stepSize: 1
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        }
                    }
                }
            });
            
            // 显示维度详情
            const dimensionDetails = document.getElementById('dimension-details');
            dimensionDetails.innerHTML = '';
            
            for (const dimension in dimensionAverages) {
                const score = dimensionAverages[dimension];
                let level, color;
                
                if (score >= 4) {
                    level = "优秀";
                    color = "text-green-600";
                } else if (score >= 3) {
                    level = "良好";
                    color = "text-blue-600";
                } else if (score >= 2) {
                    level = "一般";
                    color = "text-yellow-600";
                } else {
                    level = "需提升";
                    color = "text-red-600";
                }
                
                const dimensionDiv = document.createElement('div');
                dimensionDiv.className = 'flex justify-between items-center p-3 border-b last:border-b-0';
                dimensionDiv.innerHTML = `
                    <div>
                        <h4 class="font-medium text-dark">${dimension}</h4>
                        <p class="text-sm text-neutral">${dimensionInfo[dimension].description}</p>
                    </div>
                    <div class="text-right">
                        <p class="font-semibold ${color}">${level}</p>
                        <p class="text-sm text-neutral">${score.toFixed(1)}/5</p>
                    </div>
                `;
                
                dimensionDetails.appendChild(dimensionDiv);
            }
        }

        // 显示个性化建议
        function displayPersonalizedAdvice(dimensionAverages) {
            const personalizedAdvice = document.getElementById('personalized-advice');
            personalizedAdvice.innerHTML = '';
            
            // 找出得分最低的两个维度
            const sortedDimensions = Object.entries(dimensionAverages)
                .sort((a, b) => a[1] - b[1])
                .slice(0, 2);
            
            // 为每个低分项提供建议
            for (const [dimension, score] of sortedDimensions) {
                let adviceKey;
                
                if (score < 2.5) {
                    adviceKey = "low";
                } else if (score < 3.5) {
                    adviceKey = "medium";
                } else {
                    adviceKey = "high";
                }
                
                const adviceDiv = document.createElement('div');
                adviceDiv.className = 'p-4 bg-blue-50 rounded-lg';
                adviceDiv.innerHTML = `
                    <h4 class="font-medium text-dark mb-2">${dimension}提升建议</h4>
                    <p class="text-neutral">${dimensionInfo[dimension].advice[adviceKey]}</p>
                `;
                
                personalizedAdvice.appendChild(adviceDiv);
            }
            
            // 添加总体建议
            const generalAdviceDiv = document.createElement('div');
            generalAdviceDiv.className = 'p-4 bg-green-50 rounded-lg mt-4';
            generalAdviceDiv.innerHTML = `
                <h4 class="font-medium text-dark mb-2">总体提升建议</h4>
                <ul class="list-disc pl-5 space-y-2 text-neutral">
                    <li>每天花10-15分钟进行情绪反思，记录情绪变化和触发因素</li>
                    <li>学习并实践简单的放松技巧，如深呼吸、渐进式肌肉放松等</li>
                    <li>与亲友分享情绪体验，增强情绪表达能力</li>
                    <li>阅读情绪管理相关书籍，参加线上或线下工作坊</li>
                    <li>保持规律的生活作息，包括充足的睡眠、健康的饮食和适当的运动</li>
                </ul>
            `;
            
            personalizedAdvice.appendChild(generalAdviceDiv);
        }
    </script>
</body>
</html>
